import{E as x}from"./index.2b3d1184.js";import{C as M}from"./babylon.39bd9ef3.js";var k={debug:!0,showFPS:!0,chunkSize:32,chunkAddDistance:2.5,chunkRemoveDistance:3.5},e=new x(k);e.registry.registerTexture("stone","src/textures/stone.png");e.registry.registerTexture("dirt","src/textures/dirt.png");e.registry.registerTexture("grass_top","src/textures/grass_top.png");e.registry.registerTexture("grass_side","src/textures/grass_side.png");e.registry.registerTexture("log_top","src/textures/log_top.png");e.registry.registerTexture("log_side","src/textures/log_side.png");e.registry.registerTexture("leaves","src/textures/leaves.png");e.registry.registerMaterial("stoneMat",{texture:"stone"});e.registry.registerMaterial("grassMat",{texture:{top:"grass_top",bottom:"dirt",side:"grass_side"}});e.registry.registerMaterial("logMat",{texture:{top:"log_top",bottom:"log_top",side:"log_side"}});e.registry.registerMaterial("leavesMat",{texture:"leaves"});var D=e.registry.registerBlock(1,{material:"stoneMat"}),c=e.registry.registerBlock(2,{material:"grassMat"}),B=e.registry.registerBlock(3,{material:"logMat"}),_=e.registry.registerBlock(4,{material:"leavesMat"});function w(r,t,o){if(t<-3)return D;var g=2*Math.sin(r/10)+3*Math.cos(o/20);return t<g?c:0}function T(r,t,o){for(let s=0;s<4;s++)e.setBlock(B,r,t+s,o);for(let s=-2;s<=2;s++)for(let a=-2;a<=2;a++)for(let i=2;i<=3;i++)e.setBlock(_,r+s,t+4-i+1,o+a)}e.world.on("worldDataNeeded",function(r,t,o,g,s){for(var a=0;a<t.shape[0];a++)for(var i=0;i<t.shape[1];i++)for(var l=0;l<t.shape[2];l++){var u=o+a,d=g+i,m=s+l,p=w(u,d,m);t.set(a,i,l,p),p===c&&Math.random()<.02&&T(u,d+1,m)}e.world.setChunkData(r,t)});var f=e.playerEntity,h=e.entities.getPositionData(f),v=h.width,y=h.height,z=e.rendering.getScene(),n=M("player-mesh",{},z);n.scaling.x=v;n.scaling.z=v;n.scaling.y=y;n.material=e.rendering.makeStandardMaterial();e.entities.addComponent(f,e.entities.names.mesh,{mesh:n,offset:[0,y/2,0]});e.inputs.down.on("fire",function(){if(e.targetedBlock){var r=e.targetedBlock.position;e.setBlock(0,r[0],r[1],r[2])}});e.inputs.down.on("alt-fire",function(){if(e.targetedBlock){var r=e.targetedBlock.adjacent;e.setBlock(c,r[0],r[1],r[2])}});e.inputs.bind("alt-fire","KeyE");e.on("tick",function(r){var t=e.inputs.pointerState.scrolly;t!==0&&(e.camera.zoomDistance+=t>0?1:-1,e.camera.zoomDistance<0&&(e.camera.zoomDistance=0),e.camera.zoomDistance>10&&(e.camera.zoomDistance=10))});
